<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bootstrap 5</title>
    <link rel="stylesheet" href="../css/main.min.css" />
    <link rel="stylesheet" href="../css/custom/global_custom.css" />
    <link rel="stylesheet" href="../css/custom/template2.css" />
    <link rel="stylesheet" href="../css/custom/content_template2.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>

<body style="width: 1080px; height: 1920px;">
    <!-- Header -->
    <header class="site-header w-100 header-vb plain">
        <div class="top-panel">
            <h4>คุณอยู่ที่</h4>
            <h3>SCG ROOF EXPERT</h3>
        </div>

    </header>


    <!-- Main Content -->
    <main class="main-content w-100 mt-0 interactive-mode2"
        style="height: 1700px; background: url(/intearctive-mode-template/images/bg-main.png);">
        <!-- Quote -->
        <div class="quote-section  strip1">
            <p><em>“</em> <span class="txt-red">แตะที่หน้าจอ</span> <br>
                เพื่อเลือกดูสินค้าที่สนใจได้เลยค่ะ <em>”</em></p>
            <figure>
                <img src="../images/girl-big.png" class="img-fluid" alt="girl with tab" />
            </figure>
        </div>

        <!-- Content -->
        <div class="content-panel ">
            <button class="btn btn-back" onclick="history.back()">
                <i class="icon-back"></i>
            </button>
            <!-- Inner Content -->
            <div class="inner-content inner-content-custom">
                <div class="img-gallery">
                    <div class="row">
                        <div class="col-6 product-image-corosel ">
                            <div id="carouselExampleDark" class="carousel carousel-dark slide" data-bs-ride="carousel">
                                <div class="carousel-indicators justify-content-start" id="slide-button" style="width: 45rem; transform: scale(1.35); margin-left: 7.5rem;">
                                    <!-- carousel button by js -->
                                 </div>
                                <div class="carousel-inner" id="slide-content" style="width:45rem; height:45rem;">
                                    <!--  slide button by js -->
                                </div>
                           
                            </div>

                        </div>
                        <div class="col-5 product-details product-details-custom">
                            <h6 id="skuid">รหัสสินค้า 8857126925012</h6>
                            <h2 id="productname">Bewell เบาะรองหลัง Ergo-Cushion
                                Serie Back EC-01 (Cooling Cotton)</h2>
                            <label id="tagline" style="line-height:22px; margin-top:1rem;">Bewel</label>
                            <p id="price"><span>ราคา</span>1,490 บาท <a href="#"
                                    id="delivery_tag">สินค้าจัดส่งที่บ้าน</a></p>
                            <ul style="list-style:none; margin-left:0px; padding-left: 0px; margin-top:0px">
                                <li id="desc">สายรัดกับเก้าอี้ให้ปรับระดับได้ <br>เพื่อปรับให้เข้า</li>
                            </ul>
                            <div class="d-flex puchase-options two">
                                <div class="  puchase-option2 options qrcode" type="button">
                                    <h6>ดูข้อมูลเพิ่มเติม<br>
                                        ผ่านมือถือ
                                    </h6>
                                    <img id="qrcode1" src="../images/qrcode.png" alt="ซื้อออนไลน์ผ่าน
                  www.scghome.com" class="img-fluid" />
                                </div>
                                <div class="  puchase-option2 options qrcode" type="button">
                                    <h6 class="bold">ซื้อออนไลน์
                                    </h6>
                                    <img id="qrcode2" src="../images/qrcode.png" alt="ซื้อออนไลน์ผ่าน
                  www.scghome.com" class="img-fluid" />
                                </div>
                                <div class="  puchase-option2 options qrcode" type="button">
                                    <h6>ขอใบเสนอราคา
                                    </h6>
                                    <img id="qrcode3" src="../images/qrcode.png" alt="ซื้อออนไลน์ผ่าน
                 www.scghome.com" class="img-fluid" />
                                </div>
                                <div class="  puchase-option2 options qrcode" type="button">
                                    <h6>ปรึกษา<br>
                                        ผู้เชี่ยวชาญ
                                    </h6>
                                    <img id="qrcode4" src="../images/qrcode.png" alt="ซื้อออนไลน์ผ่าน
                 www.scghome.com" class="img-fluid" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="template2-footer">
            <div class="footer-right">
                <div class="footer-right-content d-flex flex-column">
                    <div class="group-qr-code-footer">
                        <div class="qr-box-footer shadow">
                            <p> <img src="../images/fb-logo.png" alt=""> Facebook </p> <img src="../images/qr-fb.png"
                                alt="">
                        </div>
                        <div class="qr-box-footer shadow">
                            <p> <img src="../images/ig-logo.png" alt=""> Instragram </p> <img src="../images/qr-ig.png"
                                alt="">
                        </div>
                        <div class="qr-box-footer shadow">
                            <p> <img src="../images/yt-logo.png" alt=""> Youtube </p> <img src="../images/qr-yt.png"
                                alt="">
                        </div>
                    </div>
                    <div class="footer-text-right mt-5">
                        <h1> รับข่าวสารและโปรโมชั่นก่อนใคร </h1>
                        <h1>ผ่านช่องทาง Social Media <h1 class="text-footer-highlight"> SCGHOMEExperience </h1>
                            </>
                    </div>

                </div>
            </div>

            <div class="footer-left"> <img class="logo-scg-exp" src="../images/logo-scgexperience.png" alt=""> </div>
        </div>
    </main>

    <script src="../node_modules/bootstrap/dist/js/bootstrap.js"></script>
</body>
<script>
    $(document).ready(function () {
        $.getJSON('../configs.json', function (jd) {

            var product_id = localStorage.getItem('id')
            if (!(product_id == null || product_id == '')) {
                var selected_product = []
                var searchArray = []
                for (const [main_menu, main_menu_obj] of Object.entries(jd.category_product.roof.sub_category_product)) {
                    main_menu_obj.products.forEach(product => {
                        searchArray.push(product)
                    });
                }
                selected_product = searchArray.filter(function (el) {
                    return el.id == product_id
                });

                console.log("selected_product[0]", selected_product[0])

                selected_product[0].sku ? $("#skuid").text("รหัสสินค้า " + selected_product[0].sku || "") : $("#skuid").remove();
                selected_product[0].tagline ? $("#tagline").text(selected_product[0].tagline || "") : $("#tagline").remove();
                selected_product[0].name ? $("#productname").html(selected_product[0].name) : $("#productname");

                if (selected_product[0].delivery_tag) {
                    selected_product[0].price ? $("#price").html("<span>ราคา</span> " + numberWithCommas(selected_product[0].price) + ` บาท <a id="delivery_tag" style="position:absolute; right:0; margin-top:2px" href="#">${selected_product[0].delivery_tag}</a>`) : $("#price").remove()
                } else {
                    selected_product[0].price ? $("#price").html("<span>ราคา</span> " + numberWithCommas(selected_product[0].price) + 'บาท') : $("#price").remove()
                }
                selected_product[0].description ? $("#desc").html(selected_product[0].description) : $("#desc").remove()
                selected_product[0].qrcode[0].ดูข้อมูลเพิ่มเติมผ่านมือถือ ? $("#qrcode1").attr('src', selected_product[0].qrcode[0].ดูข้อมูลเพิ่มเติมผ่านมือถือ) : $("#qrcode").remove()
                selected_product[0].qrcode[0].ซื้อออนไลน์ ? $("#qrcode2").attr('src', selected_product[0].qrcode[0].ซื้อออนไลน์) : $("#qrcode").remove()
                selected_product[0].qrcode[0].ขอใบเสนอราคา ? $("#qrcode3").attr('src', selected_product[0].qrcode[0].ขอใบเสนอราคา) : $("#qrcode").remove()
                selected_product[0].qrcode[0].ปรึกษาผู้เชี่ยวชาญ ? $("#qrcode4").attr('src', selected_product[0].qrcode[0].ปรึกษาผู้เชี่ยวชาญ) : $("#qrcode").remove()

                selected_product[0].images_videos.forEach((content_link, content_link_index) => {
                    console.log('loop product content ')
                    console.log(content_link)
                    console.log(content_link_index)
                    if (content_link.endsWith('jpg') || content_link.endsWith('png') || content_link.endsWith('svg')){
                        console.log('is image')
                        $('#slide-button').append(`
                            <div type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="${content_link_index}"
                                    class="" aria-label="Slide 1"><img src="${content_link}"
                                        class="d-block img-fluid" alt="..."> </div>
                        `)

                        $(`#slide-content`).append(`
                        <div class="carousel-item" data-bs-interval="10000" style="height:100%;">
                                        <img src="${content_link}" class="d-block w-100" alt="...">
                                        <div class="carousel-caption d-none d-md-block">
                                        </div>
                                    </div>
                        `)
                        
                        
                    }else if (content_link.endsWith('mp4') || content_link.endsWith('mov')){
                        console.log('is video')
                        $('#slide-button').append(`
                        <div type="button" class="active" data-bs-target="#carouselExampleDark"
                                        data-bs-slide-to="${content_link_index}" aria-label="Slide 2" aria-current="false">
                                        <video width="100%" height="100%">
                                            <source src="${content_link}" type="video/mp4">
                                            <source src="${content_link}" type="video/ogg">
                                            Your browser does not support the video tag.
                                        </video>
                                    </div>
                        `)

                        $('#slide-content').append(`
                        <div class="carousel-item  active" data-bs-interval="5000" style="height:100%;">
                                        <div class="embed-responsive embed-responsive-16by9 h-100">
                                            <video width="100%" height="100%" autoplay muted>
                                                <source src="${content_link}" type="video/mp4">
                                                <source src="${content_link}" type="video/ogg">
                                                Your browser does not support the video tag.
                                            </video>
                                        </div>
                                        <div class="carousel-caption d-none d-md-block">

                                        </div>
                                    </div>`
                                    )
                    
                    }
                    
                    if (content_link_index==0){
                        $('#slide-button div:eq(0)').addClass('active')
                        $('#slide-content>div:eq(0)').addClass('active')
                        $('#slide-button div:eq(0)').attr('aria-current', true)
                      
                    }
                });
                
                if (selected_product[0].bestseller_tag){
                    $(`#carouselExampleDark`).append(`<div style="width: 100px; height: 100px; position:absolute; left:-3%; top:5%;">  <img style="position:absolute;" src="../images/best_seller_tag1.png"/> <p style="z-index:10; position:absolute;top:3px; left: 12px; color:white; font-size:12px;"> ${selected_product[0].bestseller_tag} </p>  <img style="position:absolute; top:27%;" src="../images/best_seller_tag2.png"/>  </div>`)  
                }

            }
        }).fail(function (jqxhr, textStatus, error) {

        });


    });

    function numberWithCommas(x) {
        return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }
</script>

</html>